<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiaLife Pro - AI ê¸°ë°˜ 1í˜•ë‹¹ë‡¨ë³‘ ê´€ë¦¬</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .pulse-green { animation: pulseGreen 2s infinite; }
        @keyframes pulseGreen { 0%, 100% { background-color: rgb(34, 197, 94); } 50% { background-color: rgb(22, 163, 74); } }
        .icon { display: inline-block; width: 1em; height: 1em; vertical-align: middle; }
        .hover-scale { transition: transform 0.2s; }
        .hover-scale:hover { transform: scale(1.05); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ë“¤
        const Heart = () => React.createElement('span', { className: 'icon' }, 'â¤ï¸');
        const Droplets = () => React.createElement('span', { className: 'icon' }, 'ðŸ’§');
        const Brain = () => React.createElement('span', { className: 'icon' }, 'ðŸ§ ');
        const Target = () => React.createElement('span', { className: 'icon' }, 'ðŸŽ¯');
        const BarChart3 = () => React.createElement('span', { className: 'icon' }, 'ðŸ“Š');
        const Save = () => React.createElement('span', { className: 'icon' }, 'ðŸ’¾');
        const LogOut = () => React.createElement('span', { className: 'icon' }, 'ðŸšª');
        const Bot = () => React.createElement('span', { className: 'icon' }, 'ðŸ¤–');
        const Bell = () => React.createElement('span', { className: 'icon' }, 'ðŸ””');
        const AlertTriangle = () => React.createElement('span', { className: 'icon' }, 'âš ï¸');
        const Sparkles = () => React.createElement('span', { className: 'icon' }, 'âœ¨');
        const Edit = () => React.createElement('span', { className: 'icon' }, 'âœï¸');
        const Trash = () => React.createElement('span', { className: 'icon' }, 'ðŸ—‘ï¸');
        const Settings = () => React.createElement('span', { className: 'icon' }, 'âš™ï¸');
        const Check = () => React.createElement('span', { className: 'icon' }, 'âœ…');
        const X = () => React.createElement('span', { className: 'icon' }, 'âŒ');

        const DiabetesManagementApp = () => {
            const [currentUser, setCurrentUser] = useState(null);
            const [authMode, setAuthMode] = useState('login');
            const [authData, setAuthData] = useState({ username: '', password: '', confirmPassword: '' });
            const [bloodSugar, setBloodSugar] = useState('');
            const [carbs, setCarbs] = useState('');
            const [insulinDose, setInsulinDose] = useState(0);
            const [actualInsulinDose, setActualInsulinDose] = useState('');
            const [showInsulinTracking, setShowInsulinTracking] = useState(false);
            const [activeInsulinEvent, setActiveInsulinEvent] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [notifications, setNotifications] = useState([]);
            const [editingRecord, setEditingRecord] = useState(null);
            const [showSettings, setShowSettings] = useState(false);

            const saveToStorage = (key, data) => {
                try {
                    localStorage.setItem(key, JSON.stringify(data));
                    return true;
                } catch (error) {
                    return false;
                }
            };

            const loadFromStorage = (key) => {
                try {
                    const data = localStorage.getItem(key);
                    return data ? JSON.parse(data) : null;
                } catch (error) {
                    return null;
                }
            };

            const [userDatabase, setUserDatabase] = useState(() => {
                return loadFromStorage('diabetesApp_users') || {};
            });

            const [userSettings, setUserSettings] = useState({
                carbRatio: 10,
                correctionFactor: 50,
                targetBG: 120,
                targetMin: 80,
                targetMax: 180,
                weight: 70,
                insulinType: 'rapid'
            });

            const [personalData, setPersonalData] = useState({
                bloodSugars: [],
                insulin: [],
                insulinEvents: [],
                stats: {
                    avgBG: 0,
                    timeInRange: 0,
                    totalRecords: 0
                }
            });

            const addNotification = (type, title, message) => {
                const notification = {
                    id: Date.now(),
                    type,
                    title,
                    message,
                    timestamp: new Date().toISOString(),
                    read: false
                };
                setNotifications(prev => [...prev, notification]);
                
                // 3ì´ˆ í›„ ìžë™ ì œê±°
                setTimeout(() => {
                    setNotifications(prev => prev.filter(n => n.id !== notification.id));
                }, 3000);
            };

            const updateUserData = (newData) => {
                const updatedUser = {
                    ...currentUser,
                    settings: userSettings,
                    data: newData,
                    lastSaved: new Date().toISOString()
                };

                const updatedDatabase = {
                    ...userDatabase,
                    [currentUser.username]: updatedUser
                };

                setUserDatabase(updatedDatabase);
                setCurrentUser(updatedUser);
                saveToStorage('diabetesApp_users', updatedDatabase);
            };

            const handleAuth = () => {
                if (authMode === 'register') {
                    if (authData.password !== authData.confirmPassword) {
                        alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                        return;
                    }
                    if (userDatabase[authData.username]) {
                        alert('ì´ë¯¸ ì¡´ìž¬í•˜ëŠ” ì‚¬ìš©ìžëª…ìž…ë‹ˆë‹¤.');
                        return;
                    }

                    const newUser = {
                        username: authData.username,
                        password: authData.password,
                        createdDate: new Date().toISOString(),
                        settings: { ...userSettings },
                        data: { ...personalData }
                    };

                    const updatedDatabase = {
                        ...userDatabase,
                        [authData.username]: newUser
                    };

                    setUserDatabase(updatedDatabase);
                    setCurrentUser(newUser);
                    saveToStorage('diabetesApp_users', updatedDatabase);
                    saveToStorage('diabetesApp_lastUser', authData.username);
                    addNotification('info', 'í™˜ì˜í•©ë‹ˆë‹¤!', `${authData.username}ë‹˜, íšŒì›ê°€ìž…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`);
                } else {
                    const user = userDatabase[authData.username];
                    if (!user || user.password !== authData.password) {
                        alert('ì‚¬ìš©ìžëª… ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                        return;
                    }
                    setCurrentUser(user);
                    setUserSettings(user.settings || userSettings);
                    setPersonalData(user.data || personalData);
                    saveToStorage('diabetesApp_lastUser', authData.username);
                    addNotification('info', 'ì•ˆë…•í•˜ì„¸ìš”!', `${user.username}ë‹˜, ë‹¤ì‹œ ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!`);
                }
                setAuthData({ username: '', password: '', confirmPassword: '' });
            };

            const addInsulinEvent = (dose, carbs, preBG, note = '') => {
                const event = {
                    id: Date.now(),
                    dose: parseFloat(dose),
                    carbs: parseFloat(carbs) || 0,
                    preBG: parseFloat(preBG),
                    timestamp: new Date().toISOString(),
                    followUpBGs: [],
                    note: note,
                    completed: false
                };

                const newData = {
                    ...personalData,
                    insulinEvents: [...personalData.insulinEvents, event]
                };

                setPersonalData(newData);
                updateUserData(newData);
                setActiveInsulinEvent(event.id);
                addNotification('info', 'ì¸ìŠë¦° ê¸°ë¡', `${dose}ë‹¨ìœ„ íˆ¬ì—¬ ê¸°ë¡ë¨. 1-2ì‹œê°„ í›„ í˜ˆë‹¹ì„ í™•ì¸í•˜ì„¸ìš”.`);
            };

            const addFollowUpBG = (eventId, bgValue, hoursAfter) => {
                const newData = {
                    ...personalData,
                    insulinEvents: personalData.insulinEvents.map(event => 
                        event.id === eventId ? 
                        { 
                            ...event, 
                            followUpBGs: [...event.followUpBGs, {
                                value: parseFloat(bgValue),
                                hoursAfter: parseFloat(hoursAfter),
                                timestamp: new Date().toISOString()
                            }]
                        } : event
                    )
                };
                setPersonalData(newData);
                updateUserData(newData);
                addNotification('success', 'ì¶”ì  ê¸°ë¡', `${hoursAfter}ì‹œê°„ í›„ í˜ˆë‹¹ ${bgValue}mg/dL ê¸°ë¡ë¨`);
            };

            const getInsulinInsights = () => {
                if (personalData.insulinEvents.length < 3) {
                    return "ë” ë§Žì€ ê¸°ë¡ì´ í•„ìš”í•©ë‹ˆë‹¤. (ìµœì†Œ 3íšŒ)";
                }

                const recentEvents = personalData.insulinEvents.slice(-10);
                const effectiveEvents = recentEvents.filter(event => 
                    event.followUpBGs.length > 0 && event.carbs > 0
                );

                if (effectiveEvents.length < 2) {
                    return "ì¶©ë¶„í•œ ì¶”ì  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
                }

                let totalEffectiveness = 0;
                let count = 0;

                effectiveEvents.forEach(event => {
                    const twoHourBG = event.followUpBGs.find(bg => bg.hoursAfter >= 1.5 && bg.hoursAfter <= 2.5);
                    if (twoHourBG) {
                        const bgDrop = event.preBG - twoHourBG.value;
                        const insulinPerCarb = event.dose / event.carbs;
                        const effectiveness = bgDrop / event.dose;
                        totalEffectiveness += effectiveness;
                        count++;
                    }
                });

                if (count === 0) return "2ì‹œê°„ í›„ í˜ˆë‹¹ ê¸°ë¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.";

                const avgEffectiveness = totalEffectiveness / count;
                
                return `ê´€ì°°ëœ íŒ¨í„´: ì¸ìŠë¦° 1ë‹¨ìœ„ë‹¹ í‰ê·  ${Math.round(avgEffectiveness)}mg/dL ê°ì†Œ ê²½í–¥. 
                
                âš ï¸ ì¤‘ìš”: ì´ëŠ” ë‹¨ìˆœí•œ í†µê³„ì´ë©°, ì‹¤ì œ ìš©ëŸ‰ ê²°ì •ì—ëŠ” ì˜ë£Œì§„ê³¼ ìƒì˜í•˜ì„¸ìš”. 
                
                ê°œì¸ì°¨, ìŠ¤íŠ¸ë ˆìŠ¤, ìš´ë™, ì§ˆë³‘ ë“±ì´ ì˜í–¥ì„ ì¤„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.`;
            };
                const record = {
                    id: Date.now(),
                    value: parseFloat(value),
                    timestamp: new Date().toISOString(),
                    note: ''
                };

                const newData = {
                    ...personalData,
                    bloodSugars: [...personalData.bloodSugars, record],
                    stats: {
                        ...personalData.stats,
                        totalRecords: personalData.stats.totalRecords + 1
                    }
                };

                setPersonalData(newData);
                updateUserData(newData);

                const bgNum = parseFloat(value);
                if (bgNum < userSettings.targetMin) {
                    addNotification('warning', 'ì €í˜ˆë‹¹ ì£¼ì˜', `í˜ˆë‹¹ì´ ${value}mg/dL ìž…ë‹ˆë‹¤. ê°„ì‹ì„ ë“œì„¸ìš”!`);
                } else if (bgNum > userSettings.targetMax) {
                    addNotification('warning', 'ê³ í˜ˆë‹¹ ì£¼ì˜', `í˜ˆë‹¹ì´ ${value}mg/dL ìž…ë‹ˆë‹¤. ìˆ˜ë¶„ì„ ì¶©ë¶„ížˆ ë“œì„¸ìš”!`);
                } else {
                    addNotification('success', 'ì¢‹ì•„ìš”!', 'í˜ˆë‹¹ì´ ëª©í‘œ ë²”ìœ„ ì•ˆì— ìžˆìŠµë‹ˆë‹¤!');
                }
            };

            const deleteBloodSugarRecord = (id) => {
                if (confirm('ì´ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    const newData = {
                        ...personalData,
                        bloodSugars: personalData.bloodSugars.filter(record => record.id !== id),
                        stats: {
                            ...personalData.stats,
                            totalRecords: Math.max(0, personalData.stats.totalRecords - 1)
                        }
                    };
                    setPersonalData(newData);
                    updateUserData(newData);
                    addNotification('info', 'ì‚­ì œ ì™„ë£Œ', 'ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            };

            const editBloodSugarRecord = (id, newValue) => {
                const newData = {
                    ...personalData,
                    bloodSugars: personalData.bloodSugars.map(record => 
                        record.id === id ? { ...record, value: parseFloat(newValue) } : record
                    )
                };
                setPersonalData(newData);
                updateUserData(newData);
                setEditingRecord(null);
                addNotification('success', 'ìˆ˜ì • ì™„ë£Œ', 'ê¸°ë¡ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
            };

            const calculateInsulinDose = () => {
                if (!carbs || !bloodSugar) return;
                const carbsNum = parseFloat(carbs);
                const bgNum = parseFloat(bloodSugar);
                const mealInsulin = carbsNum / userSettings.carbRatio;
                let correctionInsulin = 0;
                if (bgNum > userSettings.targetBG) {
                    correctionInsulin = (bgNum - userSettings.targetBG) / userSettings.correctionFactor;
                }
                const totalDose = Math.round((mealInsulin + correctionInsulin) * 10) / 10;
                setInsulinDose(totalDose);
            };

            const getBGStatus = (bg) => {
                const bgNum = parseFloat(bg);
                if (bgNum < userSettings.targetMin) return { 
                    color: 'text-orange-600', 
                    bgColor: 'bg-orange-50', 
                    status: 'ë‚®ìŒ',
                    action: 'ê°„ì‹ì„ ë“œì„¸ìš”' 
                };
                if (bgNum > userSettings.targetMax) return { 
                    color: 'text-red-600', 
                    bgColor: 'bg-red-50', 
                    status: 'ë†’ìŒ',
                    action: 'ë¬¼ì„ ë§ˆì‹œê³  ì‰¬ì„¸ìš”' 
                };
                return { 
                    color: 'text-green-600', 
                    bgColor: 'bg-green-50', 
                    status: 'ì¢‹ìŒ',
                    action: 'ê³„ì† ìž˜ í•˜ê³  ìžˆì–´ìš”!' 
                };
            };

            const clearAllData = () => {
                if (confirm('ì •ë§ë¡œ ëª¨ë“  ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ìž‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                    const newData = {
                        bloodSugars: [],
                        insulin: [],
                        stats: { avgBG: 0, timeInRange: 0, totalRecords: 0 }
                    };
                    setPersonalData(newData);
                    updateUserData(newData);
                    addNotification('info', 'ëª¨ë“  ê¸°ë¡ ì‚­ì œ', 'ëª¨ë“  ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            };

            const updateSettings = (newSettings) => {
                setUserSettings(newSettings);
                const updatedUser = {
                    ...currentUser,
                    settings: newSettings,
                    data: personalData
                };
                const updatedDatabase = {
                    ...userDatabase,
                    [currentUser.username]: updatedUser
                };
                setUserDatabase(updatedDatabase);
                setCurrentUser(updatedUser);
                saveToStorage('diabetesApp_users', updatedDatabase);
                addNotification('success', 'ì„¤ì • ì €ìž¥', 'ì„¤ì •ì´ ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            };

            // ìžë™ ë¡œê·¸ì¸
            useEffect(() => {
                const lastUser = loadFromStorage('diabetesApp_lastUser');
                if (lastUser && userDatabase[lastUser]) {
                    const user = userDatabase[lastUser];
                    setCurrentUser(user);
                    setUserSettings(user.settings || userSettings);
                    setPersonalData(user.data || personalData);
                }
            }, [userDatabase]);

            const handleLogout = () => {
                localStorage.removeItem('diabetesApp_lastUser');
                setCurrentUser(null);
                setNotifications([]);
                setShowSettings(false);
            };

            // ë¡œê·¸ì¸ í™”ë©´
            if (!currentUser) {
                return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center" },
                    React.createElement('div', { className: "bg-white p-8 rounded-2xl shadow-xl border max-w-md w-full" },
                        React.createElement('div', { className: "text-center mb-8" },
                            React.createElement('div', { className: "bg-blue-600 p-4 rounded-xl inline-block mb-4" },
                                React.createElement(Heart, { className: "text-3xl" })
                            ),
                            React.createElement('h1', { className: "text-2xl font-bold text-gray-800" }, "DiaLife Pro"),
                            React.createElement('p', { className: "text-gray-600 mt-2" }, "ì‰½ê³  ì•ˆì „í•œ ë‹¹ë‡¨ ê´€ë¦¬"),
                            React.createElement('p', { className: "text-sm text-blue-600 mt-1" }, "ì•„ì´ë“¤ë„ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìžˆì–´ìš”!")
                        ),
                        React.createElement('div', { className: "space-y-6" },
                            React.createElement('div', { className: "flex bg-gray-100 rounded-lg p-1" },
                                React.createElement('button', {
                                    onClick: () => setAuthMode('login'),
                                    className: `flex-1 py-3 px-4 rounded-md text-sm font-medium transition-colors ${
                                        authMode === 'login' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-600'
                                    }`
                                }, "ë¡œê·¸ì¸"),
                                React.createElement('button', {
                                    onClick: () => setAuthMode('register'),
                                    className: `flex-1 py-3 px-4 rounded-md text-sm font-medium transition-colors ${
                                        authMode === 'register' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-600'
                                    }`
                                }, "íšŒì›ê°€ìž…")
                            ),
                            React.createElement('div', { className: "space-y-4" },
                                React.createElement('input', {
                                    type: "text",
                                    value: authData.username,
                                    onChange: (e) => setAuthData(prev => ({ ...prev, username: e.target.value })),
                                    className: "w-full px-4 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg",
                                    placeholder: "ì´ë¦„ì„ ìž…ë ¥í•˜ì„¸ìš”"
                                }),
                                React.createElement('input', {
                                    type: "password",
                                    value: authData.password,
                                    onChange: (e) => setAuthData(prev => ({ ...prev, password: e.target.value })),
                                    className: "w-full px-4 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg",
                                    placeholder: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•˜ì„¸ìš”"
                                }),
                                authMode === 'register' && React.createElement('input', {
                                    type: "password",
                                    value: authData.confirmPassword,
                                    onChange: (e) => setAuthData(prev => ({ ...prev, confirmPassword: e.target.value })),
                                    className: "w-full px-4 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg",
                                    placeholder: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ìž…ë ¥í•˜ì„¸ìš”"
                                })
                            ),
                            React.createElement('button', {
                                onClick: handleAuth,
                                className: "w-full bg-blue-600 hover:bg-blue-700 text-white py-4 px-4 rounded-lg font-medium transition-colors text-lg hover-scale"
                            }, authMode === 'login' ? 'ë¡œê·¸ì¸' : 'íšŒì›ê°€ìž…')
                        )
                    )
                );
            }

            // ì„¤ì • í™”ë©´
            if (showSettings) {
                return React.createElement('div', { className: "min-h-screen bg-gray-50" },
                    React.createElement('header', { className: "bg-white shadow-sm border-b" },
                        React.createElement('div', { className: "max-w-4xl mx-auto px-4 py-4" },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('div', { className: "flex items-center gap-3" },
                                    React.createElement(Settings),
                                    React.createElement('h1', { className: "text-xl font-bold text-gray-800" }, "ì„¤ì •")
                                ),
                                React.createElement('button', {
                                    onClick: () => setShowSettings(false),
                                    className: "bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors"
                                }, "ëŒì•„ê°€ê¸°")
                            )
                        )
                    ),
                    React.createElement('main', { className: "max-w-4xl mx-auto px-4 py-8" },
                        React.createElement('div', { className: "space-y-6" },
                            // ëª©í‘œ ë²”ìœ„ ì„¤ì •
                            React.createElement('div', { className: "bg-white p-6 rounded-2xl shadow-lg border" },
                                React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" }, "í˜ˆë‹¹ ëª©í‘œ ë²”ìœ„ ì„¤ì •"),
                                React.createElement('div', { className: "grid md:grid-cols-2 gap-4" },
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "ìµœì†Œê°’ (mg/dL)"),
                                        React.createElement('input', {
                                            type: "number",
                                            value: userSettings.targetMin,
                                            onChange: (e) => setUserSettings(prev => ({ ...prev, targetMin: parseInt(e.target.value) })),
                                            className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "ìµœëŒ€ê°’ (mg/dL)"),
                                        React.createElement('input', {
                                            type: "number",
                                            value: userSettings.targetMax,
                                            onChange: (e) => setUserSettings(prev => ({ ...prev, targetMax: parseInt(e.target.value) })),
                                            className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        })
                                    )
                                ),
                                React.createElement('div', { className: "mt-4 p-3 bg-blue-50 rounded-lg" },
                                    React.createElement('p', { className: "text-sm text-blue-700" },
                                        `í˜„ìž¬ ëª©í‘œ ë²”ìœ„: ${userSettings.targetMin} - ${userSettings.targetMax} mg/dL`
                                    )
                                )
                            ),

                            // ì¸ìŠë¦° ì„¤ì •
                            React.createElement('div', { className: "bg-white p-6 rounded-2xl shadow-lg border" },
                                React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" }, "ì¸ìŠë¦° ê³„ì‚° ì„¤ì •"),
                                React.createElement('div', { className: "grid md:grid-cols-2 gap-4" },
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "íƒ„ìˆ˜í™”ë¬¼ ë¹„ìœ¨ (1:X)"),
                                        React.createElement('input', {
                                            type: "number",
                                            value: userSettings.carbRatio,
                                            onChange: (e) => setUserSettings(prev => ({ ...prev, carbRatio: parseInt(e.target.value) })),
                                            className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "êµì • ì¸ìž"),
                                        React.createElement('input', {
                                            type: "number",
                                            value: userSettings.correctionFactor,
                                            onChange: (e) => setUserSettings(prev => ({ ...prev, correctionFactor: parseInt(e.target.value) })),
                                            className: "w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                        })
                                    )
                                )
                            ),

                            // ë°ì´í„° ê´€ë¦¬
                            React.createElement('div', { className: "bg-white p-6 rounded-2xl shadow-lg border" },
                                React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" }, "ë°ì´í„° ê´€ë¦¬"),
                                React.createElement('div', { className: "space-y-4" },
                                    React.createElement('div', { className: "p-4 bg-red-50 border border-red-200 rounded-lg" },
                                        React.createElement('h4', { className: "font-medium text-red-800 mb-2" }, "ëª¨ë“  ê¸°ë¡ ì‚­ì œ"),
                                        React.createElement('p', { className: "text-sm text-red-600 mb-3" }, "ëª¨ë“  í˜ˆë‹¹ ê¸°ë¡ê³¼ ì¸ìŠë¦° ê¸°ë¡ì´ ì‚­ì œë©ë‹ˆë‹¤. ì´ ìž‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."),
                                        React.createElement('button', {
                                            onClick: clearAllData,
                                            className: "bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm"
                                        }, "ëª¨ë“  ê¸°ë¡ ì‚­ì œ")
                                    )
                                )
                            ),

                            React.createElement('button', {
                                onClick: () => updateSettings(userSettings),
                                className: "w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-medium transition-colors"
                            }, "ì„¤ì • ì €ìž¥")
                        )
                    )
                );
            }

            // ë©”ì¸ ì•± í™”ë©´
            return React.createElement('div', { className: "min-h-screen bg-gray-50" },
                // ì•Œë¦¼ ì˜ì—­
                notifications.length > 0 && React.createElement('div', { className: "fixed top-4 right-4 z-50 space-y-2" },
                    notifications.map(notification =>
                        React.createElement('div', { 
                            key: notification.id, 
                            className: `p-4 rounded-lg shadow-lg border max-w-sm ${
                                notification.type === 'success' ? 'bg-green-50 border-green-200 text-green-800' :
                                notification.type === 'warning' ? 'bg-orange-50 border-orange-200 text-orange-800' :
                                'bg-blue-50 border-blue-200 text-blue-800'
                            } fade-in`
                        },
                            React.createElement('p', { className: "font-medium" }, notification.title),
                            React.createElement('p', { className: "text-sm mt-1" }, notification.message)
                        )
                    )
                ),

                React.createElement('header', { className: "bg-white shadow-sm border-b" },
                    React.createElement('div', { className: "max-w-6xl mx-auto px-4 py-4" },
                        React.createElement('div', { className: "flex items-center justify-between" },
                            React.createElement('div', { className: "flex items-center gap-3" },
                                React.createElement(Heart, { className: "text-2xl" }),
                                React.createElement('div', null,
                                    React.createElement('h1', { className: "text-xl font-bold text-gray-800" }, "DiaLife Pro"),
                                    React.createElement('p', { className: "text-sm text-gray-600" }, `ì•ˆë…•í•˜ì„¸ìš”, ${currentUser.username}ë‹˜!`)
                                )
                            ),
                            React.createElement('div', { className: "flex items-center gap-3" },
                                React.createElement('button', {
                                    onClick: () => setShowSettings(true),
                                    className: "flex items-center gap-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg text-sm hover:bg-gray-200 transition-colors hover-scale"
                                },
                                    React.createElement(Settings),
                                    "ì„¤ì •"
                                ),
                                React.createElement('button', {
                                    onClick: handleLogout,
                                    className: "flex items-center gap-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg text-sm hover:bg-gray-200 transition-colors hover-scale"
                                },
                                    React.createElement(LogOut),
                                    "ë¡œê·¸ì•„ì›ƒ"
                                )
                            )
                        )
                    )
                ),

                React.createElement('main', { className: "max-w-6xl mx-auto px-4 py-8" },
                    // í†µê³„ ì¹´ë“œ
                    React.createElement('div', { className: "grid md:grid-cols-3 gap-4 mb-8" },
                        React.createElement('div', { className: "bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-2xl border hover-scale" },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('div', null,
                                    React.createElement('p', { className: "text-blue-600 font-medium" }, "ì´ ê¸°ë¡"),
                                    React.createElement('p', { className: "text-3xl font-bold text-blue-800" }, personalData.stats.totalRecords || 0),
                                    React.createElement('p', { className: "text-sm text-blue-600" }, "ë²ˆ ì¸¡ì •í–ˆì–´ìš”")
                                ),
                                React.createElement(BarChart3, { className: "text-3xl" })
                            )
                        ),
                        React.createElement('div', { className: "bg-gradient-to-br from-emerald-50 to-emerald-100 p-6 rounded-2xl border hover-scale" },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('div', null,
                                    React.createElement('p', { className: "text-emerald-600 font-medium" }, "ëª©í‘œ ë²”ìœ„"),
                                    React.createElement('p', { className: "text-lg font-bold text-emerald-800" }, `${userSettings.targetMin} - ${userSettings.targetMax}`),
                                    React.createElement('p', { className: "text-sm text-emerald-600" }, "mg/dL")
                                ),
                                React.createElement(Target, { className: "text-3xl" })
                            )
                        ),
                        React.createElement('div', { className: "bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-2xl border hover-scale" },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('div', null,
                                    React.createElement('p', { className: "text-orange-600 font-medium" }, "ì¸ìŠë¦° ë¹„ìœ¨"),
                                    React.createElement('p', { className: "text-2xl font-bold text-orange-800" }, `1:${userSettings.carbRatio}`),
                                    React.createElement('p', { className: "text-sm text-orange-600" }, "íƒ„ìˆ˜í™”ë¬¼")
                                ),
                                React.createElement(Brain, { className: "text-3xl" })
                            )
                        )
                    ),

                    // í˜ˆë‹¹ ìž…ë ¥ íŒ¨ë„
                    React.createElement('div', { className: "bg-white p-6 rounded-2xl shadow-lg border mb-6" },
                        React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" }, "í˜ˆë‹¹ ê¸°ë¡í•˜ê¸°"),
                        React.createElement('div', { className: "flex gap-3 items-end" },
                            React.createElement('div', { className: "flex-1" },
                                React.createElement('input', {
                                    type: "number",
                                    value: bloodSugar,
                                    onChange: (e) => setBloodSugar(e.target.value),
                                    placeholder: "í˜ˆë‹¹ ìˆ˜ì¹˜ (mg/dL)",
                                    className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg"
                                })
                            ),
                            React.createElement('button', {
                                onClick: () => {
                                    if (bloodSugar) {
                                        addBloodSugarRecord(bloodSugar);
                                        setBloodSugar('');
                                    }
                                },
                                disabled: !bloodSugar,
                                className: "bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-medium transition-colors hover-scale"
                            }, "ê¸°ë¡í•˜ê¸°")
                        ),
                        bloodSugar && React.createElement('div', { className: `mt-3 p-3 rounded-lg ${getBGStatus(bloodSugar).bgColor}` },
                            React.createElement('p', { className: `font-medium ${getBGStatus(bloodSugar).color}` },
                                `${getBGStatus(bloodSugar).status}: ${getBGStatus(bloodSugar).action}`
                            )
                        )
                    ),

                    // ì¸ìŠë¦° íˆ¬ì—¬ ë° ì¶”ì  íŒ¨ë„
                    React.createElement('div', { className: "bg-white p-6 rounded-2xl shadow-lg border mb-6" },
                        React.createElement('div', { className: "flex items-center justify-between mb-4" },
                            React.createElement('h3', { className: "text-lg font-bold text-gray-800" }, "ì¸ìŠë¦° íˆ¬ì—¬ ê¸°ë¡"),
                            React.createElement('button', {
                                onClick: () => setShowInsulinTracking(!showInsulinTracking),
                                className: "text-blue-600 hover:text-blue-800 text-sm"
                            }, showInsulinTracking ? 'ì ‘ê¸°' : 'íŽ¼ì¹˜ê¸°')
                        ),
                        
                        showInsulinTracking && React.createElement('div', { className: "space-y-4" },
                            // ì˜ë£Œ ì•ˆì „ ê²½ê³ 
                            React.createElement('div', { className: "bg-red-50 border border-red-200 p-4 rounded-lg" },
                                React.createElement('p', { className: "text-sm text-red-800 font-medium" }, "âš ï¸ ì¤‘ìš”í•œ ì•ˆì „ ê³ ì§€ì‚¬í•­"),
                                React.createElement('ul', { className: "text-xs text-red-700 mt-2 space-y-1" },
                                    React.createElement('li', null, "â€¢ ì´ ê¸°ëŠ¥ì€ ê¸°ë¡ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©í•˜ì„¸ìš”"),
                                    React.createElement('li', null, "â€¢ ì¸ìŠë¦° ìš©ëŸ‰ ê²°ì •ì€ ë°˜ë“œì‹œ ì˜ë£Œì§„ê³¼ ìƒì˜í•˜ì„¸ìš”"),
                                    React.createElement('li', null, "â€¢ AI ë¶„ì„ì€ ì°¸ê³ ìš©ì´ë©° ì˜ë£Œ ì¡°ì–¸ì„ ëŒ€ì²´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
                                    React.createElement('li', null, "â€¢ ì‘ê¸‰ìƒí™© ì‹œ ì¦‰ì‹œ ì˜ë£Œì§„ì—ê²Œ ì—°ë½í•˜ì„¸ìš”")
                                )
                            ),

                            // ì‹¤ì œ íˆ¬ì—¬ ê¸°ë¡
                            React.createElement('div', { className: "grid md:grid-cols-3 gap-3" },
                                React.createElement('input', {
                                    type: "number",
                                    value: actualInsulinDose,
                                    onChange: (e) => setActualInsulinDose(e.target.value),
                                    placeholder: "ì‹¤ì œ íˆ¬ì—¬ ë‹¨ìœ„",
                                    className: "px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                }),
                                React.createElement('input', {
                                    type: "number",
                                    value: carbs,
                                    onChange: (e) => setCarbs(e.target.value),
                                    placeholder: "íƒ„ìˆ˜í™”ë¬¼ (g)",
                                    className: "px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                }),
                                React.createElement('button', {
                                    onClick: () => {
                                        if (actualInsulinDose && bloodSugar) {
                                            addInsulinEvent(actualInsulinDose, carbs || 0, bloodSugar);
                                            setActualInsulinDose('');
                                            setCarbs('');
                                        }
                                    },
                                    disabled: !actualInsulinDose || !bloodSugar,
                                    className: "bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg font-medium transition-colors"
                                }, "íˆ¬ì—¬ ê¸°ë¡")
                            ),

                            // í™œì„± ì¶”ì  ì´ë²¤íŠ¸
                            activeInsulinEvent && React.createElement('div', { className: "bg-blue-50 border border-blue-200 p-4 rounded-lg" },
                                React.createElement('p', { className: "text-blue-800 font-medium mb-3" }, "í˜ˆë‹¹ ì¶”ì  ì¤‘..."),
                                React.createElement('div', { className: "flex gap-2" },
                                    React.createElement('input', {
                                        type: "number",
                                        placeholder: "í˜„ìž¬ í˜ˆë‹¹",
                                        className: "flex-1 px-3 py-2 border border-gray-300 rounded-lg"
                                    }),
                                    React.createElement('select', {
                                        className: "px-3 py-2 border border-gray-300 rounded-lg"
                                    },
                                        React.createElement('option', { value: "1" }, "1ì‹œê°„ í›„"),
                                        React.createElement('option', { value: "1.5" }, "1.5ì‹œê°„ í›„"),
                                        React.createElement('option', { value: "2" }, "2ì‹œê°„ í›„")
                                    ),
                                    React.createElement('button', {
                                        onClick: (e) => {
                                            const bgInput = e.target.parentElement.querySelector('input');
                                            const timeSelect = e.target.parentElement.querySelector('select');
                                            if (bgInput.value) {
                                                addFollowUpBG(activeInsulinEvent, bgInput.value, timeSelect.value);
                                                bgInput.value = '';
                                                if (timeSelect.value === "2") {
                                                    setActiveInsulinEvent(null);
                                                }
                                            }
                                        },
                                        className: "bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg"
                                    }, "ê¸°ë¡")
                                )
                            ),

                            // AI íŒ¨í„´ ë¶„ì„
                            React.createElement('div', { className: "bg-gray-50 border border-gray-200 p-4 rounded-lg" },
                                React.createElement('h4', { className: "font-medium text-gray-800 mb-2" }, "íŒ¨í„´ ê´€ì°° ê²°ê³¼"),
                                React.createElement('p', { className: "text-sm text-gray-700 whitespace-pre-wrap" }, getInsulinInsights())
                            )
                        )
                    ),
                    React.createElement('div', { className: "bg-white p-6 rounded-2xl shadow-lg border mb-6" },
                        React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" }, "ì¸ìŠë¦° ê³„ì‚°ê¸°"),
                        React.createElement('div', { className: "grid md:grid-cols-2 gap-4 mb-4" },
                            React.createElement('input', {
                                type: "number",
                                value: carbs,
                                onChange: (e) => setCarbs(e.target.value),
                                placeholder: "íƒ„ìˆ˜í™”ë¬¼ (g)",
                                className: "px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg"
                            }),
                            React.createElement('button', {
                                onClick: calculateInsulinDose,
                                disabled: !carbs || !bloodSugar,
                                className: "bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-medium transition-colors hover-scale"
                            }, "ê³„ì‚°í•˜ê¸°")
                        ),
                        insulinDose > 0 && React.createElement('div', { className: "bg-purple-50 border border-purple-200 p-4 rounded-lg" },
                            React.createElement('p', { className: "text-lg font-bold text-purple-800" }, `ê¶Œìž¥ ì¸ìŠë¦°: ${insulinDose} ë‹¨ìœ„`),
                            React.createElement('p', { className: "text-sm text-purple-600 mt-1" }, "ì˜ë£Œì§„ê³¼ ìƒì˜ í›„ ì‚¬ìš©í•˜ì„¸ìš”")
                        )
                    ),

                    // ìµœê·¼ ê¸°ë¡ë“¤
                    React.createElement('div', { className: "grid md:grid-cols-2 gap-6" },
                        // í˜ˆë‹¹ ê¸°ë¡
                        React.createElement('div', { className: "bg-white p-6 rounded-2xl shadow-lg border" },
                            React.createElement('h4', { className: "font-bold text-gray-800 mb-4 text-lg" }, "ë‚´ í˜ˆë‹¹ ê¸°ë¡"),
                            React.createElement('div', { className: "space-y-3" },
                                personalData.bloodSugars.length > 0 ? personalData.bloodSugars.slice(-10).reverse().map((record) => {
                                    const status = getBGStatus(record.value);
                                    return React.createElement('div', { 
                                        key: record.id, 
                                        className: `flex items-center justify-between p-4 rounded-lg border ${status.bgColor}`
                                    },
                                        React.createElement('div', { className: "flex-1" },
                                            editingRecord === record.id ? 
                                                React.createElement('div', { className: "flex gap-2" },
                                                    React.createElement('input', {
                                                        type: "number",
                                                        defaultValue: record.value,
                                                        className: "px-3 py-1 border border-gray-300 rounded w-24",
                                                        onKeyPress: (e) => {
                                                            if (e.key === 'Enter') {
                                                                editBloodSugarRecord(record.id, e.target.value);
                                                            }
                                                        }
                                                    }),
                                                    React.createElement('button', {
                                                        onClick: (e) => {
                                                            const input = e.target.parentElement.querySelector('input');
                                                            editBloodSugarRecord(record.id, input.value);
                                                        },
                                                        className: "text-green-600 hover:text-green-800"
                                                    }, React.createElement(Check)),
                                                    React.createElement('button', {
                                                        onClick: () => setEditingRecord(null),
                                                        className: "text-gray-600 hover:text-gray-800"
                                                    }, React.createElement(X))
                                                ) :
                                                React.createElement('div', null,
                                                    React.createElement('p', { className: `font-bold text-lg ${status.color}` }, `${record.value} mg/dL`),
                                                    React.createElement('p', { className: "text-sm text-gray-600" }, 
                                                        new Date(record.timestamp).toLocaleString('ko-KR', {
                                                            month: 'short',
                                                            day: 'numeric',
                                                            hour: '2-digit',
                                                            minute: '2-digit'
                                                        })
                                                    ),
                                                    React.createElement('span', { className: `text-sm font-medium ${status.color}` }, status.status)
                                                )
                                        ),
                                        editingRecord !== record.id && React.createElement('div', { className: "flex gap-2" },
                                            React.createElement('button', {
                                                onClick: () => setEditingRecord(record.id),
                                                className: "p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded-lg transition-colors"
                                            }, React.createElement(Edit)),
                                            React.createElement('button', {
                                                onClick: () => deleteBloodSugarRecord(record.id),
                                                className: "p-2 text-red-600 hover:text-red-800 hover:bg-red-100 rounded-lg transition-colors"
                                            }, React.createElement(Trash))
                                        )
                                    );
                                }) : React.createElement('div', { className: "text-center py-8 text-gray-500" },
                                    React.createElement('p', { className: "text-lg" }, "ì•„ì§ ê¸°ë¡ì´ ì—†ì–´ìš”"),
                                    React.createElement('p', { className: "text-sm mt-1" }, "ì²« ë²ˆì§¸ í˜ˆë‹¹ì„ ê¸°ë¡í•´ë³´ì„¸ìš”!")
                                )
                            )
                        ),

                        // ì¸ìŠë¦° ì´ë²¤íŠ¸ ê¸°ë¡
                        React.createElement('div', { className: "bg-white p-6 rounded-2xl shadow-lg border" },
                            React.createElement('h4', { className: "font-bold text-gray-800 mb-4 text-lg" }, "ì¸ìŠë¦° íˆ¬ì—¬ ê¸°ë¡"),
                            React.createElement('div', { className: "space-y-3" },
                                personalData.insulinEvents && personalData.insulinEvents.length > 0 ? personalData.insulinEvents.slice(-5).reverse().map((event) => {
                                    const maxFollowUp = event.followUpBGs.length > 0 ? 
                                        Math.max(...event.followUpBGs.map(bg => bg.hoursAfter)) : 0;
                                    
                                    return React.createElement('div', { 
                                        key: event.id, 
                                        className: "p-4 rounded-lg border bg-purple-50"
                                    },
                                        React.createElement('div', { className: "flex justify-between items-start" },
                                            React.createElement('div', null,
                                                React.createElement('p', { className: "font-bold text-purple-800" }, `${event.dose} ë‹¨ìœ„`),
                                                React.createElement('p', { className: "text-sm text-gray-600" }, 
                                                    `íˆ¬ì—¬ ì „: ${event.preBG}mg/dL ${event.carbs > 0 ? `| íƒ„ìˆ˜í™”ë¬¼: ${event.carbs}g` : ''}`
                                                ),
                                                React.createElement('p', { className: "text-xs text-gray-500" },
                                                    new Date(event.timestamp).toLocaleString('ko-KR', {
                                                        month: 'short',
                                                        day: 'numeric',
                                                        hour: '2-digit',
                                                        minute: '2-digit'
                                                    })
                                                )
                                            ),
                                            React.createElement('div', { className: "text-right" },
                                                maxFollowUp >= 2 ? 
                                                    React.createElement('span', { className: "text-xs bg-green-100 text-green-800 px-2 py-1 rounded" }, "ì™„ë£Œ") :
                                                    React.createElement('span', { className: "text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded" }, "ì¶”ì ì¤‘")
                                            )
                                        ),
                                        event.followUpBGs.length > 0 && React.createElement('div', { className: "mt-2 space-y-1" },
                                            event.followUpBGs.map((followUp, index) =>
                                                React.createElement('p', { key: index, className: "text-xs text-purple-700" },
                                                    `${followUp.hoursAfter}ì‹œê°„ í›„: ${followUp.value}mg/dL`
                                                )
                                            )
                                        )
                                    );
                                }) : React.createElement('div', { className: "text-center py-8 text-gray-500" },
                                    React.createElement('p', { className: "text-lg" }, "ì¸ìŠë¦° ê¸°ë¡ì´ ì—†ì–´ìš”"),
                                    React.createElement('p', { className: "text-sm mt-1" }, "íˆ¬ì—¬ í›„ ì¶”ì ì„ ì‹œìž‘í•´ë³´ì„¸ìš”!")
                                )
                            )
                        )
                    )
                )
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(DiabetesManagementApp));
    </script>
</body>
</html>
