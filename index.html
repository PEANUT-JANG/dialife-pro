<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiaLife Pro - í†µí•© ë‹¹ë‡¨ ê´€ë¦¬</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .icon { display: inline-block; width: 1em; height: 1em; vertical-align: middle; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Heart = () => React.createElement('span', { className: 'icon' }, 'â¤ï¸');
        const Settings = () => React.createElement('span', { className: 'icon' }, 'âš™ï¸');
        const LogOut = () => React.createElement('span', { className: 'icon' }, 'ðŸšª');
        const Edit = () => React.createElement('span', { className: 'icon' }, 'âœï¸');
        const Trash = () => React.createElement('span', { className: 'icon' }, 'ðŸ—‘ï¸');
        const Search = () => React.createElement('span', { className: 'icon' }, 'ðŸ”');
        const Clock = () => React.createElement('span', { className: 'icon' }, 'â°');
        const Chart = () => React.createElement('span', { className: 'icon' }, 'ðŸ“ˆ');

        // ìŒì‹ ë°ì´í„°ë² ì´ìŠ¤
        const FOOD_DATABASE = {
            'ë°¥': { carbs: 23, category: 'ì£¼ì‹' },
            'í°ë°¥': { carbs: 23, category: 'ì£¼ì‹' },
            'í˜„ë¯¸ë°¥': { carbs: 23, category: 'ì£¼ì‹' },
            'ë¼ë©´': { carbs: 55, category: 'ë©´ë¥˜' },
            'ìš°ë™': { carbs: 21, category: 'ë©´ë¥˜' },
            'ìŠ¤íŒŒê²Œí‹°': { carbs: 25, category: 'ë©´ë¥˜' },
            'ì‹ë¹µ': { carbs: 47, category: 'ë¹µë¥˜' },
            'í† ìŠ¤íŠ¸': { carbs: 47, category: 'ë¹µë¥˜' },
            'ì‚¬ê³¼': { carbs: 14, category: 'ê³¼ì¼' },
            'ë°”ë‚˜ë‚˜': { carbs: 23, category: 'ê³¼ì¼' },
            'ì˜¤ë Œì§€': { carbs: 12, category: 'ê³¼ì¼' },
            'í¬ë„': { carbs: 17, category: 'ê³¼ì¼' },
            'ë”¸ê¸°': { carbs: 8, category: 'ê³¼ì¼' },
            'ìˆ˜ë°•': { carbs: 8, category: 'ê³¼ì¼' },
            'ê³¼ìž': { carbs: 65, category: 'ê°„ì‹' },
            'ì¿ í‚¤': { carbs: 68, category: 'ê°„ì‹' },
            'ì¼€ì´í¬': { carbs: 45, category: 'ê°„ì‹' },
            'ì´ˆì½œë¦¿': { carbs: 57, category: 'ê°„ì‹' },
            'ì½œë¼': { carbs: 11, category: 'ìŒë£Œ' },
            'ì‚¬ì´ë‹¤': { carbs: 11, category: 'ìŒë£Œ' },
            'ì˜¤ë Œì§€ì£¼ìŠ¤': { carbs: 11, category: 'ìŒë£Œ' },
            'ìš°ìœ ': { carbs: 5, category: 'ìŒë£Œ' },
            'ê°ìž': { carbs: 17, category: 'ì±„ì†Œ' },
            'ê³ êµ¬ë§ˆ': { carbs: 20, category: 'ì±„ì†Œ' },
            'ì˜¥ìˆ˜ìˆ˜': { carbs: 19, category: 'ì±„ì†Œ' }
        };

        const DiabetesApp = () => {
            const [currentUser, setCurrentUser] = useState(null);
            const [authMode, setAuthMode] = useState('login');
            const [authData, setAuthData] = useState({ username: '', password: '', confirmPassword: '' });
            const [notifications, setNotifications] = useState([]);
            const [showSettings, setShowSettings] = useState(false);
            const [currentView, setCurrentView] = useState('record'); // record, history, search

            // ê¸°ë¡ ìž…ë ¥ ìƒíƒœ
            const [preMealBG, setPreMealBG] = useState('');
            const [foodName, setFoodName] = useState('');
            const [foodAmount, setFoodAmount] = useState('');
            const [insulinDose, setInsulinDose] = useState('');
            const [calculatedCarbs, setCalculatedCarbs] = useState(0);
            const [foodSuggestions, setFoodSuggestions] = useState([]);

            // ì¶”ì  ìƒíƒœ
            const [activeEvent, setActiveEvent] = useState(null);
            const [postMealBG, setPostMealBG] = useState('');
            const [timeAfterMeal, setTimeAfterMeal] = useState('1');

            // ê²€ìƒ‰ ìƒíƒœ
            const [searchQuery, setSearchQuery] = useState('');
            const [searchResults, setSearchResults] = useState([]);

            const [userDatabase, setUserDatabase] = useState(() => {
                try {
                    const saved = localStorage.getItem('diabetesApp_users');
                    return saved ? JSON.parse(saved) : {};
                } catch {
                    return {};
                }
            });

            const [userSettings, setUserSettings] = useState({
                targetMin: 80,
                targetMax: 180,
                carbRatio: 10,
                correctionFactor: 50
            });

            const [personalData, setPersonalData] = useState({
                mealEvents: [], // í†µí•© ì‹ì‚¬ ì´ë²¤íŠ¸
                soloRecords: [], // ë‹¨ë… í˜ˆë‹¹ ê¸°ë¡
                stats: { totalEvents: 0 }
            });

            const saveToStorage = (key, data) => {
                try {
                    localStorage.setItem(key, JSON.stringify(data));
                } catch (error) {
                    console.error('Save failed:', error);
                }
            };

            const addNotification = (type, title, message) => {
                const notification = { id: Date.now(), type, title, message };
                setNotifications(prev => [...prev, notification]);
                setTimeout(() => {
                    setNotifications(prev => prev.filter(n => n.id !== notification.id));
                }, 4000);
            };

            const updateUserData = (newData) => {
                if (!currentUser) return;
                
                const updatedUser = {
                    ...currentUser,
                    settings: userSettings,
                    data: newData
                };

                const updatedDatabase = {
                    ...userDatabase,
                    [currentUser.username]: updatedUser
                };

                setUserDatabase(updatedDatabase);
                setCurrentUser(updatedUser);
                saveToStorage('diabetesApp_users', updatedDatabase);
            };

            // ìŒì‹ ê²€ìƒ‰
            const searchFood = (query) => {
                if (!query) {
                    setFoodSuggestions([]);
                    return;
                }
                
                const suggestions = Object.keys(FOOD_DATABASE)
                    .filter(food => food.includes(query))
                    .slice(0, 5)
                    .map(food => ({ name: food, ...FOOD_DATABASE[food] }));
                
                setFoodSuggestions(suggestions);
            };

            // íƒ„ìˆ˜í™”ë¬¼ ê³„ì‚°
            const calculateCarbs = (foodName, amount) => {
                const food = FOOD_DATABASE[foodName];
                if (!food || !amount) return 0;
                return Math.round((food.carbs * parseFloat(amount)) / 100);
            };

            // í†µí•© ì‹ì‚¬ ì´ë²¤íŠ¸ ê¸°ë¡
            const recordMealEvent = () => {
                if (!preMealBG || !foodName || !foodAmount) {
                    addNotification('warning', 'ìž…ë ¥ ëˆ„ë½', 'ëª¨ë“  í•„ë“œë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”');
                    return;
                }

                const carbs = calculateCarbs(foodName, foodAmount);
                const event = {
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    preMealBG: parseFloat(preMealBG),
                    foodName,
                    foodAmount: parseFloat(foodAmount),
                    carbs,
                    insulinDose: insulinDose ? parseFloat(insulinDose) : 0,
                    postMealBGs: [],
                    completed: false,
                    notes: ''
                };

                const newData = {
                    ...personalData,
                    mealEvents: [...personalData.mealEvents, event],
                    stats: { totalEvents: personalData.stats.totalEvents + 1 }
                };

                setPersonalData(newData);
                updateUserData(newData);
                setActiveEvent(event.id);

                // ìž…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                setPreMealBG('');
                setFoodName('');
                setFoodAmount('');
                setInsulinDose('');
                setCalculatedCarbs(0);
                setFoodSuggestions([]);

                addNotification('success', 'ê¸°ë¡ ì™„ë£Œ', `${foodName} ì‹ì‚¬ê°€ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤. 1-2ì‹œê°„ í›„ í˜ˆë‹¹ì„ ì¶”ê°€ë¡œ ê¸°ë¡í•˜ì„¸ìš”.`);
            };

            // ì‹í›„ í˜ˆë‹¹ ì¶”ê°€
            const addPostMealBG = () => {
                if (!postMealBG || !activeEvent) return;

                const newData = {
                    ...personalData,
                    mealEvents: personalData.mealEvents.map(event =>
                        event.id === activeEvent ? {
                            ...event,
                            postMealBGs: [...event.postMealBGs, {
                                value: parseFloat(postMealBG),
                                hoursAfter: parseFloat(timeAfterMeal),
                                timestamp: new Date().toISOString()
                            }],
                            completed: parseFloat(timeAfterMeal) >= 2
                        } : event
                    )
                };

                setPersonalData(newData);
                updateUserData(newData);
                setPostMealBG('');

                if (parseFloat(timeAfterMeal) >= 2) {
                    setActiveEvent(null);
                    addNotification('success', 'ì¶”ì  ì™„ë£Œ', 'ì‹ì‚¬ ì´ë²¤íŠ¸ ê¸°ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                } else {
                    addNotification('info', 'ê¸°ë¡ ì¶”ê°€', `${timeAfterMeal}ì‹œê°„ í›„ í˜ˆë‹¹ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                }
            };

            // ìŒì‹ë³„ ê¸°ë¡ ê²€ìƒ‰
            const searchFoodHistory = (query) => {
                if (!query) {
                    setSearchResults([]);
                    return;
                }

                const results = personalData.mealEvents.filter(event =>
                    event.foodName.includes(query)
                ).map(event => ({
                    ...event,
                    bgChange: event.postMealBGs.length > 0 ? 
                        event.postMealBGs[event.postMealBGs.length - 1].value - event.preMealBG : null,
                    maxBG: event.postMealBGs.length > 0 ? 
                        Math.max(...event.postMealBGs.map(bg => bg.value)) : null
                }));

                setSearchResults(results);
            };

            // í˜ˆë‹¹ ìƒíƒœ í‰ê°€
            const getBGStatus = (bg) => {
                const bgNum = parseFloat(bg);
                if (bgNum < userSettings.targetMin) {
                    return { color: 'text-orange-600', bgColor: 'bg-orange-50', status: 'ë‚®ìŒ' };
                }
                if (bgNum > userSettings.targetMax) {
                    return { color: 'text-red-600', bgColor: 'bg-red-50', status: 'ë†’ìŒ' };
                }
                return { color: 'text-green-600', bgColor: 'bg-green-50', status: 'ì¢‹ìŒ' };
            };

            const handleAuth = () => {
                if (authMode === 'register') {
                    if (authData.password !== authData.confirmPassword) {
                        alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                        return;
                    }
                    if (userDatabase[authData.username]) {
                        alert('ì´ë¯¸ ì¡´ìž¬í•˜ëŠ” ì‚¬ìš©ìžëª…ìž…ë‹ˆë‹¤.');
                        return;
                    }

                    const newUser = {
                        username: authData.username,
                        password: authData.password,
                        settings: userSettings,
                        data: personalData
                    };

                    const updatedDatabase = { ...userDatabase, [authData.username]: newUser };
                    setUserDatabase(updatedDatabase);
                    setCurrentUser(newUser);
                    saveToStorage('diabetesApp_users', updatedDatabase);
                    addNotification('success', 'í™˜ì˜í•©ë‹ˆë‹¤!', 'íšŒì›ê°€ìž…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                } else {
                    const user = userDatabase[authData.username];
                    if (!user || user.password !== authData.password) {
                        alert('ì‚¬ìš©ìžëª… ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                        return;
                    }
                    setCurrentUser(user);
                    setUserSettings(user.settings || userSettings);
                    setPersonalData(user.data || personalData);
                    addNotification('success', 'í™˜ì˜í•©ë‹ˆë‹¤!', user.username + 'ë‹˜');
                }
                setAuthData({ username: '', password: '', confirmPassword: '' });
            };

            useEffect(() => {
                searchFood(foodName);
            }, [foodName]);

            useEffect(() => {
                if (foodName && FOOD_DATABASE[foodName] && foodAmount) {
                    setCalculatedCarbs(calculateCarbs(foodName, foodAmount));
                }
            }, [foodName, foodAmount]);

            useEffect(() => {
                searchFoodHistory(searchQuery);
            }, [searchQuery, personalData.mealEvents]);

            if (!currentUser) {
                return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center" },
                    React.createElement('div', { className: "bg-white p-8 rounded-2xl shadow-xl border max-w-md w-full" },
                        React.createElement('div', { className: "text-center mb-8" },
                            React.createElement('div', { className: "bg-blue-600 p-4 rounded-xl inline-block mb-4" },
                                React.createElement(Heart, { className: "text-3xl" })
                            ),
                            React.createElement('h1', { className: "text-2xl font-bold text-gray-800" }, "DiaLife Pro"),
                            React.createElement('p', { className: "text-gray-600 mt-2" }, "í†µí•© ë‹¹ë‡¨ ê´€ë¦¬ ì‹œìŠ¤í…œ")
                        ),
                        React.createElement('div', { className: "space-y-6" },
                            React.createElement('div', { className: "flex bg-gray-100 rounded-lg p-1" },
                                React.createElement('button', {
                                    onClick: () => setAuthMode('login'),
                                    className: `flex-1 py-3 px-4 rounded-md text-sm font-medium transition-colors ${
                                        authMode === 'login' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-600'
                                    }`
                                }, "ë¡œê·¸ì¸"),
                                React.createElement('button', {
                                    onClick: () => setAuthMode('register'),
                                    className: `flex-1 py-3 px-4 rounded-md text-sm font-medium transition-colors ${
                                        authMode === 'register' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-600'
                                    }`
                                }, "íšŒì›ê°€ìž…")
                            ),
                            React.createElement('div', { className: "space-y-4" },
                                React.createElement('input', {
                                    type: "text",
                                    value: authData.username,
                                    onChange: (e) => setAuthData(prev => ({ ...prev, username: e.target.value })),
                                    className: "w-full px-4 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg",
                                    placeholder: "ì´ë¦„ì„ ìž…ë ¥í•˜ì„¸ìš”"
                                }),
                                React.createElement('input', {
                                    type: "password",
                                    value: authData.password,
                                    onChange: (e) => setAuthData(prev => ({ ...prev, password: e.target.value })),
                                    className: "w-full px-4 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg",
                                    placeholder: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•˜ì„¸ìš”"
                                }),
                                authMode === 'register' && React.createElement('input', {
                                    type: "password",
                                    value: authData.confirmPassword,
                                    onChange: (e) => setAuthData(prev => ({ ...prev, confirmPassword: e.target.value })),
                                    className: "w-full px-4 py-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-lg",
                                    placeholder: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ìž…ë ¥í•˜ì„¸ìš”"
                                })
                            ),
                            React.createElement('button', {
                                onClick: handleAuth,
                                className: "w-full bg-blue-600 hover:bg-blue-700 text-white py-4 px-4 rounded-lg font-medium transition-colors text-lg"
                            }, authMode === 'login' ? 'ë¡œê·¸ì¸' : 'íšŒì›ê°€ìž…')
                        )
                    )
                );
            }

            return React.createElement('div', { className: "min-h-screen bg-gray-50" },
                // ì•Œë¦¼
                notifications.length > 0 && React.createElement('div', { className: "fixed top-4 right-4 z-50 space-y-2" },
                    notifications.map(notification =>
                        React.createElement('div', { 
                            key: notification.id, 
                            className: `p-4 rounded-lg shadow-lg border max-w-sm ${
                                notification.type === 'success' ? 'bg-green-50 border-green-200 text-green-800' :
                                notification.type === 'warning' ? 'bg-orange-50 border-orange-200 text-orange-800' :
                                'bg-blue-50 border-blue-200 text-blue-800'
                            } fade-in`
                        },
                            React.createElement('p', { className: "font-medium" }, notification.title),
                            React.createElement('p', { className: "text-sm mt-1" }, notification.message)
                        )
                    )
                ),

                // í—¤ë”
                React.createElement('header', { className: "bg-white shadow-sm border-b" },
                    React.createElement('div', { className: "max-w-6xl mx-auto px-4 py-4" },
                        React.createElement('div', { className: "flex items-center justify-between" },
                            React.createElement('div', { className: "flex items-center gap-3" },
                                React.createElement(Heart, { className: "text-2xl" }),
                                React.createElement('div', null,
                                    React.createElement('h1', { className: "text-xl font-bold text-gray-800" }, "DiaLife Pro"),
                                    React.createElement('p', { className: "text-sm text-gray-600" }, currentUser.username + 'ë‹˜ì˜ í†µí•© ë‹¹ë‡¨ ê´€ë¦¬')
                                )
                            ),
                            React.createElement('button', {
                                onClick: () => setCurrentUser(null),
                                className: "flex items-center gap-2 bg-gray-100 text-gray-700 px-3 py-2 rounded-lg text-sm hover:bg-gray-200"
                            },
                                React.createElement(LogOut),
                                "ë¡œê·¸ì•„ì›ƒ"
                            )
                        )
                    )
                ),

                // ë„¤ë¹„ê²Œì´ì…˜
                React.createElement('nav', { className: "bg-white border-b" },
                    React.createElement('div', { className: "max-w-6xl mx-auto px-4" },
                        React.createElement('div', { className: "flex space-x-8" },
                            React.createElement('button', {
                                onClick: () => setCurrentView('record'),
                                className: `py-4 px-2 border-b-2 font-medium text-sm ${
                                    currentView === 'record' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`
                            }, "ðŸ“ ìƒˆ ê¸°ë¡"),
                            React.createElement('button', {
                                onClick: () => setCurrentView('history'),
                                className: `py-4 px-2 border-b-2 font-medium text-sm ${
                                    currentView === 'history' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`
                            }, "ðŸ“Š ê¸°ë¡ ëª©ë¡"),
                            React.createElement('button', {
                                onClick: () => setCurrentView('search'),
                                className: `py-4 px-2 border-b-2 font-medium text-sm ${
                                    currentView === 'search' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`
                            }, "ðŸ” ìŒì‹ë³„ ë¶„ì„")
                        )
                    )
                ),

                // ë©”ì¸ ì½˜í…ì¸ 
                React.createElement('main', { className: "max-w-6xl mx-auto px-4 py-8" },
                    // í†µê³„
                    React.createElement('div', { className: "bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-2xl border mb-6" },
                        React.createElement('div', { className: "grid md:grid-cols-3 gap-4" },
                            React.createElement('div', null,
                                React.createElement('p', { className: "text-blue-600 font-medium" }, "ì´ ì‹ì‚¬ ê¸°ë¡"),
                                React.createElement('p', { className: "text-2xl font-bold text-blue-800" }, personalData.stats.totalEvents),
                                React.createElement('p', { className: "text-sm text-blue-600" }, "ë²ˆ")
                            ),
                            React.createElement('div', null,
                                React.createElement('p', { className: "text-blue-600 font-medium" }, "ì™„ë£Œëœ ì¶”ì "),
                                React.createElement('p', { className: "text-2xl font-bold text-blue-800" }, 
                                    personalData.mealEvents.filter(e => e.completed).length
                                ),
                                React.createElement('p', { className: "text-sm text-blue-600" }, "ê±´")
                            ),
                            React.createElement('div', null,
                                React.createElement('p', { className: "text-blue-600 font-medium" }, "ëª©í‘œ ë²”ìœ„"),
                                React.createElement('p', { className: "text-lg font-bold text-blue-800" }, 
                                    userSettings.targetMin + ' - ' + userSettings.targetMax
                                ),
                                React.createElement('p', { className: "text-sm text-blue-600" }, "mg/dL")
                            )
                        )
                    ),

                    // ìƒˆ ê¸°ë¡ ìž…ë ¥
                    currentView === 'record' && React.createElement('div', { className: "space-y-6" },
                        React.createElement('div', { className: "bg-white p-6 rounded-2xl shadow-lg border" },
                            React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" }, "í†µí•© ì‹ì‚¬ ê¸°ë¡"),
                            React.createElement('div', { className: "grid md:grid-cols-2 gap-6" },
                                React.createElement('div', { className: "space-y-4" },
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "ì‹ì‚¬ ì „ í˜ˆë‹¹ (mg/dL)"),
                                        React.createElement('input', {
                                            type: "number",
                                            value: preMealBG,
                                            onChange: (e) => setPreMealBG(e.target.value),
                                            className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",
                                            placeholder: "ì˜ˆ: 120"
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "ì¸ìŠë¦° ìš©ëŸ‰ (ë‹¨ìœ„, ì„ íƒì‚¬í•­)"),
                                        React.createElement('input', {
                                            type: "number",
                                            value: insulinDose,
                                            onChange: (e) => setInsulinDose(e.target.value),
                                            className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",
                                            placeholder: "ì˜ˆ: 5"
                                        })
                                    )
                                ),
                                React.createElement('div', { className: "space-y-4" },
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "ìŒì‹ ì´ë¦„"),
                                        React.createElement('div', { className: "relative" },
                                            React.createElement('input', {
                                                type: "text",
                                                value: foodName,
                                                onChange: (e) => setFoodName(e.target.value),
                                                className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",
                                                placeholder: "ì˜ˆ: ë°¥, ì‚¬ê³¼, ë¼ë©´"
                                            }),
                                            foodSuggestions.length > 0 && React.createElement('div', { className: "absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-lg mt-1 shadow-lg z-10" },
                                                foodSuggestions.map((food, index) =>
                                                    React.createElement('button', {
                                                        key: index,
                                                        onClick: () => {
                                                            setFoodName(food.name);
                                                            setFoodSuggestions([]);
                                                        },
                                                        className: "w-full text-left px-4 py-2 hover:bg-gray-50 border-b last:border-b-0"
                                                    },
                                                        React.createElement('span', { className: "font-medium" }, food.name),
                                                        React.createElement('span', { className: "text-sm text-gray-500 ml-2" }, 
                                                            '(' + food.category + ', ' + food.carbs + 'g/100g)'
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, "ì„­ì·¨ëŸ‰ (g)"),
                                        React.createElement('input', {
                                            type: "number",
                                            value: foodAmount,
                                            onChange: (e) => setFoodAmount(e.target.value),
                                            className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",
                                            placeholder: "ì˜ˆ: 150"
                                        })
                                    )
                                )
                            ),
                            calculatedCarbs > 0 && React.createElement('div', { className: "mt-4 bg-green-50 border border-green-200 p-4 rounded-lg" },
                                React.createElement('p', { className: "font-medium text-green-800" },
                                    'ê³„ì‚°ëœ íƒ„ìˆ˜í™”ë¬¼: ' + calculatedCarbs + 'g'
                                ),
                                insulinDose && React.createElement('p', { className: "text-sm text-green-600 mt-1" },
                                    'ê¸°ë¡ë  ì¸ìŠë¦°: ' + insulinDose + 'ë‹¨ìœ„'
                                )
                            ),
                            React.createElement('button', {
                                onClick: recordMealEvent,
                                disabled: !preMealBG || !foodName || !foodAmount,
                                className: "w-full mt-6 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white py-3 px-4 rounded-lg font-medium"
                            }, "ì‹ì‚¬ ê¸°ë¡ ì‹œìž‘")
                        ),

                        // ì§„í–‰ ì¤‘ì¸ ì¶”ì 
                        activeEvent && React.createElement('div', { className: "bg-yellow-50 border border-yellow-200 p-6 rounded-2xl" },
                            React.createElement('h3', { className: "text-lg font-bold text-yellow-800 mb-4 flex items-center gap-2" },
                                React.createElement(Clock),
                                "í˜ˆë‹¹ ì¶”ì  ì¤‘"
                            ),
                            React.createElement('p', { className: "text-yellow-700 mb-4" },
                                "ì‹ì‚¬ í›„ 1-2ì‹œê°„ ê°„ê²©ìœ¼ë¡œ í˜ˆë‹¹ì„ ì¸¡ì •í•´ ì£¼ì„¸ìš”"
                            ),
                            React.createElement('div', { className: "flex gap-3" },
                                React.createElement('input', {
                                    type: "number",
                                    value: postMealBG,
                                    onChange: (e) => setPostMealBG(e.target.value),
                                    placeholder: "ì‹í›„ í˜ˆë‹¹",
                                    className: "flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500"
                                }),
                                React.createElement('select', {
                                    value: timeAfterMeal,
                                    onChange: (e) => setTimeAfterMeal(e.target.value),
                                    className: "px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500"
                                },
                                    React.createElement('option', { value: "1" }, "1ì‹œê°„ í›„"),
                                    React.createElement('option', { value: "1.5" }, "1.5ì‹œê°„ í›„"),
                                    React.createElement('option', { value: "2" }, "2ì‹œê°„ í›„")
                                ),
                                React.createElement('button', {
                                    onClick: addPostMealBG,
                                    disabled: !postMealBG,
                                    className: "bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-medium"
                                }, "ê¸°ë¡")
                            )
                        )
                    ),

                    // ê¸°ë¡ ëª©ë¡
                    currentView === 'history' && React.createElement('div', { className: "space-y-4" },
                        personalData.mealEvents.length > 0 ? personalData.mealEvents.slice().reverse().map((event) => {
                            const bgTrend = event.postMealBGs.length > 0 ? 
                                event.postMealBGs[event.postMealBGs.length - 1].value - event.preMealBG : null;
                            return React.createElement('div', { 
                                key: event.id, 
                                className: "bg-white p-6 rounded-2xl shadow-lg border"
                            },
                                React.createElement('div', { className: "flex justify-between items-start mb-4" },
                                    React.createElement('div', null,
                                        React.createElement('h4', { className: "font-bold text-lg text-gray-800" }, event.foodName),
                                        React.createElement('p', { className: "text-sm text-gray-600" },
                                            new Date(event.timestamp).toLocaleString('ko-KR')
                                        )
                                    ),
                                    React.createElement('span', { 
                                        className: `px-3 py-1 rounded-full text-xs font-medium ${
                                            event.completed ? 'bg-green-100 text-green-800' : 'bg-orange-100 text-orange-800'
                                        }`
                                    }, event.completed ? 'ì™„ë£Œ' : 'ì§„í–‰ì¤‘')
                                ),
                                React.createElement('div', { className: "grid md:grid-cols-3 gap-4 text-sm" },
                                    React.createElement('div', null,
                                        React.createElement('p', { className: "text-gray-600" }, "ì„­ì·¨ëŸ‰"),
                                        React.createElement('p', { className: "font-medium" }, event.foodAmount + 'g'),
                                        React.createElement('p', { className: "text-gray-600" }, "íƒ„ìˆ˜í™”ë¬¼"),
                                        React.createElement('p', { className: "font-medium" }, event.carbs + 'g')
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('p', { className: "text-gray-600" }, "ì‹ì „ í˜ˆë‹¹"),
                                        React.createElement('p', { className: "font-medium" }, event.preMealBG + ' mg/dL'),
                                        event.insulinDose > 0 && React.createElement('div', null,
                                            React.createElement('p', { className: "text-gray-600" }, "ì¸ìŠë¦°"),
                                            React.createElement('p', { className: "font-medium" }, event.insulinDose + ' ë‹¨ìœ„')
                                        )
                                    ),
                                    React.createElement('div', null,
                                        event.postMealBGs.length > 0 && React.createElement('div', null,
                                            React.createElement('p', { className: "text-gray-600" }, "ì‹í›„ í˜ˆë‹¹"),
                                            event.postMealBGs.map((bg, index) =>
                                                React.createElement('p', { key: index, className: "font-medium" },
                                                    bg.hoursAfter + 'ì‹œê°„: ' + bg.value + 'mg/dL'
                                                )
                                            ),
                                            bgTrend && React.createElement('p', { 
                                                className: `mt-1 font-medium ${
                                                    bgTrend > 0 ? 'text-red-600' : 'text-green-600'
                                                }`
                                            }, 'ë³€í™”: ' + (bgTrend > 0 ? '+' : '') + bgTrend + 'mg/dL')
                                        )
                                    )
                                )
                            );
                        }) : React.createElement('div', { className: "text-center py-12 text-gray-500" },
                            React.createElement('p', { className: "text-lg" }, "ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤"),
                            React.createElement('p', { className: "text-sm mt-1" }, "ì²« ë²ˆì§¸ ì‹ì‚¬ë¥¼ ê¸°ë¡í•´ë³´ì„¸ìš”!")
                        )
                    ),

                    // ìŒì‹ë³„ ê²€ìƒ‰ ë° ë¶„ì„
                    currentView === 'search' && React.createElement('div', { className: "space-y-6" },
                        React.createElement('div', { className: "bg-white p-6 rounded-2xl shadow-lg border" },
                            React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4 flex items-center gap-2" },
                                React.createElement(Search),
                                "ìŒì‹ë³„ ê¸°ë¡ ê²€ìƒ‰"
                            ),
                            React.createElement('input', {
                                type: "text",
                                value: searchQuery,
                                onChange: (e) => setSearchQuery(e.target.value),
                                placeholder: "ìŒì‹ ì´ë¦„ì„ ê²€ìƒ‰í•˜ì„¸ìš” (ì˜ˆ: ë°¥, ì‚¬ê³¼)",
                                className: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                            })
                        ),

                        searchResults.length > 0 && React.createElement('div', { className: "bg-white p-6 rounded-2xl shadow-lg border" },
                            React.createElement('h4', { className: "font-bold text-gray-800 mb-4 flex items-center gap-2" },
                                React.createElement(Chart),
                                `"${searchQuery}" ê²€ìƒ‰ ê²°ê³¼ (${searchResults.length}ê±´)`
                            ),
                            React.createElement('div', { className: "space-y-4" },
                                searchResults.map((result, index) =>
                                    React.createElement('div', { 
                                        key: result.id, 
                                        className: "p-4 border rounded-lg bg-gray-50"
                                    },
                                        React.createElement('div', { className: "grid md:grid-cols-4 gap-4 text-sm" },
                                            React.createElement('div', null,
                                                React.createElement('p', { className: "text-gray-600" }, "ë‚ ì§œ"),
                                                React.createElement('p', { className: "font-medium" },
                                                    new Date(result.timestamp).toLocaleDateString('ko-KR')
                                                ),
                                                React.createElement('p', { className: "text-gray-600 mt-1" }, "ì„­ì·¨ëŸ‰"),
                                                React.createElement('p', { className: "font-medium" }, result.foodAmount + 'g')
                                            ),
                                            React.createElement('div', null,
                                                React.createElement('p', { className: "text-gray-600" }, "ì‹ì „ í˜ˆë‹¹"),
                                                React.createElement('p', { className: "font-medium" }, result.preMealBG + ' mg/dL'),
                                                result.insulinDose > 0 && React.createElement('div', null,
                                                    React.createElement('p', { className: "text-gray-600 mt-1" }, "ì¸ìŠë¦°"),
                                                    React.createElement('p', { className: "font-medium" }, result.insulinDose + ' ë‹¨ìœ„')
                                                )
                                            ),
                                            React.createElement('div', null,
                                                result.maxBG && React.createElement('div', null,
                                                    React.createElement('p', { className: "text-gray-600" }, "ìµœê³  í˜ˆë‹¹"),
                                                    React.createElement('p', { className: "font-medium" }, result.maxBG + ' mg/dL'),
                                                    React.createElement('p', { className: "text-gray-600 mt-1" }, "íƒ„ìˆ˜í™”ë¬¼"),
                                                    React.createElement('p', { className: "font-medium" }, result.carbs + 'g')
                                                )
                                            ),
                                            React.createElement('div', null,
                                                result.bgChange !== null && React.createElement('div', null,
                                                    React.createElement('p', { className: "text-gray-600" }, "í˜ˆë‹¹ ë³€í™”"),
                                                    React.createElement('p', { 
                                                        className: `font-medium ${
                                                            result.bgChange > 0 ? 'text-red-600' : 'text-green-600'
                                                        }`
                                                    }, (result.bgChange > 0 ? '+' : '') + result.bgChange + ' mg/dL')
                                                )
                                            )
                                        )
                                    )
                                )
                            ),
                            // ê°„ë‹¨í•œ íŒ¨í„´ ë¶„ì„
                            React.createElement('div', { className: "mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg" },
                                React.createElement('h5', { className: "font-medium text-blue-800 mb-2" }, "íŒ¨í„´ ë¶„ì„"),
                                React.createElement('div', { className: "grid md:grid-cols-3 gap-4 text-sm" },
                                    React.createElement('div', null,
                                        React.createElement('p', { className: "text-blue-600" }, "í‰ê·  ì„­ì·¨ëŸ‰"),
                                        React.createElement('p', { className: "font-medium" },
                                            Math.round(searchResults.reduce((sum, r) => sum + r.foodAmount, 0) / searchResults.length) + 'g'
                                        )
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('p', { className: "text-blue-600" }, "í‰ê·  íƒ„ìˆ˜í™”ë¬¼"),
                                        React.createElement('p', { className: "font-medium" },
                                            Math.round(searchResults.reduce((sum, r) => sum + r.carbs, 0) / searchResults.length) + 'g'
                                        )
                                    ),
                                    React.createElement('div', null,
                                        searchResults.filter(r => r.bgChange !== null).length > 0 && React.createElement('div', null,
                                            React.createElement('p', { className: "text-blue-600" }, "í‰ê·  í˜ˆë‹¹ ë³€í™”"),
                                            React.createElement('p', { className: "font-medium" },
                                                Math.round(
                                                    searchResults
                                                        .filter(r => r.bgChange !== null)
                                                        .reduce((sum, r) => sum + r.bgChange, 0) / 
                                                    searchResults.filter(r => r.bgChange !== null).length
                                                ) + ' mg/dL'
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(DiabetesApp));
    </script>
</body>
</html>
